<!DOCTYPE html>
<html>
<head>
<style>
</style>
</head>
<body>
    <canvas id="myCanvas" width="800" height="587" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
    
    <script>    
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");     
        var counter = 0;
        var circles = [];
        
        //Creates Circle object constructor
        function Circle() {
            this.x = 200;
            this.y = 500;
            this.radius = 7;
            this.opacity = 1;
            this.rotation = toRadians(Math.random());
        }
        //Updates new location, size and opacity  of circle object
        Circle.prototype.update = function() {
            this.x++
            if(this.opacity < 0){
                this.opacity = 0;
            }
            if(this.opacity > 0) {
                this.opacity -= 0.005;
                }

            this.radius += .10;
            this.y = this.y + (.2 * Math.cos(this.rotation) - 1);
            context.globalAlpha = this.opacity;
            context.beginPath();
            context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
            context.closePath();
            
            context.fillStyle = "grey";
            context.fill();
        }
        
        //Converts degrees to radians
        function toRadians (angle) {
            return  angle * (Math.PI * 180);
        }        
        
        //Draws all circles on canvas
        function drawCircles() {
                var circle1 = new Circle();
            circles.push(circle1);
            }
            draw();
        
        //Calls draw methos and clears canvas after before every frame. Also controls framerate.
        function draw() {
            counter++;
            context.clearRect(0, 0, canvas.width, canvas.height);
            if(this.counter % 1.25 == 0){
            drawCircles();
            }
            for(var i = 0; i < circles.length; i++) {
                
                var newCircle = circles[i] ;
                newCircle.update();
            }
        
        requestAnimationFrame(draw);
        }
        
        context.fillStyle = "GREY";
        context.fill();

    </script>

</body>
</html>